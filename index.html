<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographic: แผนการสอนวิชา Harmony Principle หลักการประสานเสียง</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f0f4f8;
        }
        .chart-container {
            position: relative;
            margin-left: auto;
            margin-right: auto;
            height: 180px;
            max-height: 250px;
            width: 100%;
            max-width: 350px;
        }
        .bar-chart-container {
            position: relative;
            margin-left: auto;
            margin-right: auto;
            height: 280px;
            max-height: 350px;
            width: 100%;
            max-width: 550px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 220px;
            }
            .bar-chart-container {
                height: 320px;
            }
        }
        .timeline-item-card {
            background-color: white;
            padding: 0.3rem;
            border-radius: 0.3rem;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
            border-left: 2px solid;
            font-size: 0.65rem;
        }
        .section-mb {
            margin-bottom: 2rem;
        }
        .header-mb {
            margin-bottom: 1rem;
        }
        .title-mb {
            margin-bottom: 0.75rem;
        }
        .card-padding {
            padding: 0.6rem;
        }
        .text-xxs {
            font-size: 0.6rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.75rem;
            margin-bottom: 0.75rem;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            border-radius: 0.4rem;
            overflow: hidden;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.3rem;
            text-align: left;
            vertical-align: top;
            font-size: 0.7rem;
        }
        thead th {
            background-color: #073B4C;
            color: white;
            font-weight: bold;
        }
        tbody tr:nth-child(even) {
            background-color: #f8fafc;
        }
    </style>
</head>
<body class="text-gray-800">
    <div class="container mx-auto p-2 md:p-4 max-w-7xl">

        <header class="text-center header-mb">
            <p class="text-base font-semibold text-[#118AB2] mb-1">รหัสวิชา 07231109</p>
            <h1 class="text-3xl md:text-4xl font-bold text-[#073B4C] mb-2">Harmony Principle</h1>
            <h2 class="text-2xl md:text-3xl font-bold text-[#118AB2] mb-3">หลักการประสานเสียง</h2>
            <p class="max-w-3xl mx-auto text-base text-gray-600">
                แผนการสอน 16 สัปดาห์นี้จะนำคุณสู่ความเข้าใจหลักการประสานเสียงอย่างลึกซึ้ง ตั้งแต่พื้นฐานจนถึงการประยุกต์ใช้
            </p>
        </header>

        <section class="grid grid-cols-1 md:grid-cols-3 gap-3 text-center section-mb">
            <div class="bg-white card-padding rounded-lg shadow-lg border-b-3 border-[#EF476F]">
                <p class="text-4xl font-bold text-[#073B4C]">16</p>
                <p class="text-base text-gray-600 mt-0">สัปดาห์</p>
            </div>
            <div class="bg-white card-padding rounded-lg shadow-lg border-b-3 border-[#FFD166]">
                <p class="text-4xl font-bold text-[#073B4C]">5</p>
                <p class="text-base text-gray-600 mt-0">ผลลัพธ์ (CLOs)</p>
            </div>
            <div class="bg-white card-padding rounded-lg shadow-lg border-b-3 border-[#06D6A0]">
                <p class="text-4xl font-bold text-[#073B4C]">3</p>
                <p class="text-base text-gray-600 mt-0">หน่วยกิต (3-0-6)</p>
            </div>
        </section>

        <section class="section-mb">
            <h2 class="text-xl md:text-2xl font-bold text-center text-[#073B4C] title-mb">แผนการเรียน 16 สัปดาห์</h2>
            <div id="timeline-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 mx-auto max-w-full">
            </div>
        </section>
        
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-3 section-mb">
            <div class="lg:col-span-3">
                <section class="mb-6 lg:mb-0">
                    <h2 class="text-xl md:text-2xl font-bold text-center text-[#073B4C] title-mb">ผลลัพธ์การเรียนรู้ (CLOs)</h2>
                    <div id="clo-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-1.5">
                    </div>
                </section>
            </div>
            <div class="lg:col-span-2">
                <section>
                    <h2 class="text-xl md:text-2xl font-bold text-center text-[#073B4C] title-mb">สัดส่วนการประเมินผล</h2>
                    <div class="bg-white card-padding rounded-lg shadow-lg">
                        <div class="chart-container mx-auto">
                            <canvas id="assessmentDonutChart"></canvas>
                        </div>
                        <div class="text-gray-700 mt-1.5 text-center">
                            <h3 class="font-bold text-base mb-0 text-[#118AB2]">องค์ประกอบของคะแนน</h3>
                            <p class="text-xxs">คะแนนรวม 100% มาจากการประเมินที่หลากหลาย เพื่อวัดความเข้าใจทั้งภาคทฤษฎีและปฏิบัติ</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <section class="section-mb">
            <h2 class="text-xl md:text-2xl font-bold text-center text-[#073B4C] title-mb">การประเมินผลเทียบกับเป้าหมายการเรียนรู้</h2>
            <div class="bg-white card-padding rounded-lg shadow-lg">
                 <div class="text-gray-700 mb-2 text-center max-w-3xl mx-auto">
                    <h3 class="font-bold text-base mb-0 text-[#118AB2]">น้ำหนักคะแนนของแต่ละ CLO</h3>
                    <p class="text-xxs">กราฟนี้แสดงสัดส่วนน้ำหนักคะแนนของผลลัพธ์การเรียนรู้แต่ละข้อ (CLO) จากคะแนนรวม 90% (ไม่รวมการมีส่วนร่วม) เพื่อให้เห็นว่าเป้าหมายใดถูกเน้นในการประเมิน</p>
                </div>
                <div class="bar-chart-container">
                    <canvas id="cloBarChart"></canvas>
                </div>
            </div>
        </section>

        <section class="section-mb">
            <h2 class="text-xl md:text-2xl font-bold text-center text-[#073B4C] title-mb">ตารางข้อมูลฉบับเต็ม</h2>
            <div class="overflow-x-auto">
                 <h3 class="text-lg font-bold text-[#118AB2] mb-2 mt-4">แผนการสอน 16 สัปดาห์ (16-Week Course Plan)</h3>
                 <div id="table-container-1"></div>
                 <h3 class="text-lg font-bold text-[#118AB2] mb-2 mt-4">ตารางสรุปวิธีการประเมินผลและสัดส่วน</h3>
                 <div id="table-container-2"></div>
                 <h3 class="text-lg font-bold text-[#118AB2] mb-2 mt-4">การประเมิน CLO แยกตามสัปดาห์</h3>
                 <div id="table-container-3"></div>
                 <h3 class="text-lg font-bold text-[#118AB2] mb-2 mt-4">สัดส่วนการประเมินต่อ CLO (จาก 90%)</h3>
                 <div id="table-container-4"></div>
            </div>
        </section>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const palette = {
        red: '#EF476F',
        yellow: '#FFD166',
        green: '#06D6A0',
        blue: '#118AB2',
        darkBlue: '#073B4C'
    };
    
    const timelineData = [
        { week: 1, topic: 'บทนำ, Tetrachord' },
        { week: 2, topic: 'บันได Major, Diatonic' },
        { week: 3, topic: 'บันได Minor, Diatonic' },
        { week: 4, topic: 'คอร์ดพลิกกลับ, Figured Bass' },
        { week: 5, topic: 'กฎ 4-Part Writing' },
        { week: 6, topic: 'Root Position Part Writing' },
        { week: 7, topic: 'Parallel Motion, ทบทวน' },
        { week: 8, topic: 'สอบกลางภาค' },
        { week: 9, topic: 'คอร์ด V7' },
        { week: 10, topic: 'คอร์ด vii°' },
        { week: 11, topic: 'Cadence' },
        { week: 12, topic: 'Diatonic Substitution' },
        { week: 13, topic: 'Melody, Harmony, โครงงาน' },
        { week: 14, topic: 'ทบทวนปลายภาค' },
        { week: 15, topic: 'สรุป, ถาม-ตอบ' },
        { week: 16, topic: 'สอบปลายภาค' },
    ];

    const timelineGrid = document.getElementById('timeline-grid');
    timelineData.forEach((item, index) => {
        const itemDiv = document.createElement('div');
        const borderColor = index % 2 === 0 ? 'border-[#06D6A0]' : 'border-[#FFD166]';
        itemDiv.className = `timeline-item-card ${borderColor}`;
        itemDiv.innerHTML = `
            <p class="font-bold text-xs text-[#118AB2]">สัปดาห์ที่ ${item.week}</p>
            <p class="text-gray-700 text-xxs">${item.topic}</p>
        `;
        timelineGrid.appendChild(itemDiv);
    });
    
    function createWrappedLabel(text, maxLength) {
        if (text.length <= maxLength) {
            return text;
        }
        const words = text.split(' ');
        const lines = [];
        let currentLine = '';
        for (const word of words) {
            if ((currentLine + ' ' + word).length > maxLength) {
                lines.push(currentLine);
                currentLine = word;
            } else {
                currentLine = (currentLine ? currentLine + ' ' : '') + word;
            }
        }
        lines.push(currentLine);
        return lines;
    }

    const cloData = [
        { title: "CLO 1", description: "ระบุและเลือกใช้บันไดเสียง Major และ minor รวมถึงคอร์ด Diatonic ในบันไดเสียงได้อย่างถูกต้อง" },
        { title: "CLO 2", description: "อธิบายและระบุลักษณะการพลิกกลับของคอร์ด รวมถึง figured bass ได้อย่างถูกต้อง" },
        { title: "CLO 3", description: "เลือกใช้ predominant, diatonic substitution และ V7 ได้อย่างเหมาะสม" },
        { title: "CLO 4", description: "สามารถอธิบายและประยุกต์ใช้ 4-part writing rules ได้อย่างถูกต้อง" },
        { title: "CLO 5", description: "สามารถอธิบายและประยุกต์ใช้ root position part writing ได้อย่างถูกต้อง" }
    ];

    const cloGrid = document.getElementById('clo-grid');
    cloData.forEach(clo => {
        const card = document.createElement('div');
        card.className = "bg-white p-2 rounded-lg shadow-md flex items-start space-x-1.5";
        card.innerHTML = `
            <div class="flex-shrink-0 flex items-center justify-center h-7 w-7 rounded-full bg-[#118AB2] text-white text-xs font-bold">
                ${clo.title.replace('CLO ', '')}
            </div>
            <div>
                <p class="text-gray-700 text-xxs">${clo.description}</p>
            </div>
        `;
        cloGrid.appendChild(card);
    });

    const assessmentDonutCtx = document.getElementById('assessmentDonutChart').getContext('2d');
    new Chart(assessmentDonutCtx, {
        type: 'doughnut',
        data: {
            labels: ['สอบปลายภาค', 'สอบกลางภาค', 'โครงงาน/การบ้านใหญ่', 'Quiz ย่อย', createWrappedLabel('การมีส่วนร่วมในชั้นเรียน', 16)],
            datasets: [{
                label: 'สัดส่วนคะแนน',
                data: [40, 30, 10, 10, 10],
                backgroundColor: [palette.blue, palette.green, palette.yellow, palette.red, '#E0E0E0'],
                borderColor: '#f0f4f8',
                borderWidth: 2,
                hoverOffset: 4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        font: {
                            family: "'Sarabun', sans-serif",
                            size: 9
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                                return label.join(' ');
                            }
                            return label;
                        }
                    },
                    bodyFont: { size: 9 },
                    titleFont: { size: 11 }
                }
            }
        }
    });

    const cloBarCtx = document.getElementById('cloBarChart').getContext('2d');
    new Chart(cloBarCtx, {
        type: 'bar',
        data: {
            labels: ['CLO 1', 'CLO 2', 'CLO 3', 'CLO 4', 'CLO 5'],
            datasets: [{
                label: 'สัดส่วนคะแนน (%)',
                data: [20.5, 15.5, 16.33, 18.83, 18.83],
                backgroundColor: [
                    'rgba(239, 71, 111, 0.7)',
                    'rgba(255, 209, 102, 0.7)',
                    'rgba(6, 214, 160, 0.7)',
                    'rgba(17, 138, 178, 0.7)',
                    'rgba(7, 59, 76, 0.7)'
                ],
                borderColor: [
                    palette.red,
                    palette.yellow,
                    palette.green,
                    palette.blue,
                    palette.darkBlue
                ],
                borderWidth: 1
            }]
        },
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'สัดส่วนจากคะแนน 90%',
                        font: { size: 9, family: "'Sarabun', sans-serif" }
                    },
                    ticks: {
                        callback: function(value) {
                            return value + '%'
                        },
                        font: { size: 8 }
                    }
                },
                y: {
                    ticks: {
                        font: { size: 9, family: "'Sarabun', sans-serif" }
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.x !== null) {
                                label += context.parsed.x.toFixed(2) + '%';
                            }
                            return label;
                        },
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                                return label.join(' ');
                            }
                            return label;
                        }
                    },
                    bodyFont: { size: 9 },
                    titleFont: { size: 11 }
                }
            }
        }
    });

    const table1Data = [
        {week: "1", topic: "บทนำ, Tetrachord, บันได Major", clo: "-", methods: "ถาม-ตอบ, แบบฝึกหัดทบทวน", type: "Formative", score: "-"},
        {week: "2", topic: "บันได Major, คอร์ด Diatonic Major", clo: "CLO1", methods: "แบบฝึกหัดในชั้นเรียน, การบ้าน", type: "Formative", score: "-"},
        {week: "3", topic: "บันได Minor, คอร์ด Diatonic Minor", clo: "CLO1", methods: "แบบฝึกหัด, Quiz ย่อย", type: "Formative/Summative", score: "5%"},
        {week: "4", topic: "คอร์ดพลิกกลับ, Figured Bass", clo: "CLO2", methods: "แบบฝึกหัดในชั้นเรียน, การบ้าน", type: "Formative", score: "-"},
        {week: "5", topic: "กฎ 4-Part Writing Rule", clo: "CLO4", methods: "วิเคราะห์ตัวอย่าง, เขียน 2-part", type: "Formative", score: "-"},
        {week: "6", topic: "Root Position Part Writing", clo: "CLO5", methods: "เขียน 4-part voice leading, การบ้าน", type: "Formative", score: "-"},
        {week: "7", topic: "Parallel Motion, ทบทวนกลางภาค", clo: "CLO4, CLO5", methods: "วิเคราะห์ข้อผิดพลาด, ถาม-ตอบทบทวน", type: "Formative", score: "-"},
        {week: "8", topic: "สอบกลางภาค (Midterm Examination)", clo: "CLO1, CLO2, CLO4, CLO5", methods: "ข้อสอบกลางภาค", type: "Summative", score: "30%"},
        {week: "9", topic: "คอร์ด V7 (Dominant Seventh)", clo: "CLO3", methods: "สร้างและแก้ไขคอร์ด V7, การบ้าน", type: "Formative", score: "-"},
        {week: "10", topic: "คอร์ด vii° (Leading Tone Diminished Triad)", clo: "CLO3", methods: "สร้างและแก้ไขคอร์ด vii°, Quiz ย่อย", type: "Formative/Summative", score: "5%"},
        {week: "11", topic: "Cadence (จบประโยคเพลง)", clo: "CLO3", methods: "วิเคราะห์ Cadence, การบ้าน", type: "Formative", score: "-"},
        {week: "12", topic: "Diatonic Substitution", clo: "CLO3", methods: "แทนที่คอร์ด Diatonic, การบ้าน", type: "Formative", score: "-"},
        {week: "13", topic: "วิเคราะห์ Melody, Harmony, โครงงานใหญ่", clo: "CLO3, CLO4, CLO5", methods: "วิเคราะห์ Melody, โครงงาน: แต่ง Harmony", type: "Summative", score: "10%"},
        {week: "14", topic: "ทบทวนเนื้อหาก่อนสอบปลายภาค", clo: "-", methods: "ถาม-ตอบ, แบบฝึกหัดทบทวนรวม", type: "Formative", score: "-"},
        {week: "15", topic: "สรุปเนื้อหาและถาม-ตอบสุดท้าย", clo: "-", methods: "ถาม-ตอบในชั้นเรียน", type: "Formative", score: "-"},
        {week: "16", topic: "สอบปลายภาค (Final Examination)", clo: "CLO1-CLO5", methods: "ข้อสอบปลายภาค", type: "Summative", score: "40%"}
    ];

    function generateTable(id, headers, data, footer = null) {
        let tableHtml = '<table><thead><tr>';
        headers.forEach(header => {
            tableHtml += `<th>${header}</th>`;
        });
        tableHtml += '</tr></thead><tbody>';
        data.forEach(row => {
            tableHtml += '<tr>';
            row.forEach(cell => {
                tableHtml += `<td>${cell}</td>`;
            });
            tableHtml += '</tr>';
        });
        if (footer) {
            tableHtml += '<tfoot><tr>';
            footer.forEach(cell => {
                tableHtml += `<td ${cell.colspan ? `colspan="${cell.colspan}"` : ''} class="${cell.class || ''}">${cell.text}</td>`;
            });
            tableHtml += '</tr></tfoot>';
        }
        tableHtml += '</tbody></table>';
        document.getElementById(id).innerHTML = tableHtml;
    }

    generateTable(
        'table-container-1',
        ['สัปดาห์ที่', 'หัวข้อการสอน (Topics)', 'CLO ที่เกี่ยวข้อง', 'วิธีการประเมินผล (Assessment Methods)', 'Formative / Summative', 'สัดส่วนคะแนน (%) (หากมี)'],
        table1Data.map(item => [item.week, item.topic, item.clo, item.methods, item.type, item.score])
    );

    const table2Data = [
        ['**Formative**', '**Quiz ย่อย (Quiz/Short Assignment)**', '3, 10', '10%', 'CLO1, CLO3'],
        ['', '- การมีส่วนร่วมในชั้นเรียน (Class Participation)', 'ทุกสัปดาห์', '10%', 'CLO1, CLO2, CLO3, CLO4, CLO5'],
        ['**Summative**', '**สอบกลางภาค (Midterm Examination)**', '8', '30%', 'CLO1, CLO2, CLO4, CLO5'],
        ['', '**สอบปลายภาค (Final Examination)**', '16', '40%', 'CLO1, CLO2, CLO3, CLO4, CLO5'],
        ['', '**โครงงาน/การบ้านใหญ่ (Project/Major Assignment)**', '13 (ส่งในสัปดาห์ 14/16)', '10%', 'CLO3, CLO4, CLO5']
    ];
    const table2Footer = [
        { text: '**รวม**', colspan: 3, class: 'text-right font-bold' },
        { text: '**100%**', class: 'font-bold' },
        { text: '', class: '' }
    ];
    generateTable('table-container-2', ['ประเภทการประเมิน', 'วิธีการประเมิน', 'สัปดาห์ที่ประเมิน', 'สัดส่วน (%)', 'สอดคล้องกับ CLO'], table2Data, table2Footer);

    const table3Data = [
        ['**CLO1**', '**สัปดาห์ที่ 3:** Quiz ย่อย<br>**สัปดาห์ที่ 8:** สอบกลางภาค<br>**สัปดาห์ที่ 16:** สอบปลายภาค<br>**ทุกสัปดาห์:** การมีส่วนร่วมในชั้นเรียน'],
        ['**CLO2**', '**สัปดาห์ที่ 8:** สอบกลางภาค<br>**สัปดาห์ที่ 16:** สอบปลายภาค<br>**ทุกสัปดาห์:** การมีส่วนร่วมในชั้นเรียน'],
        ['**CLO3**', '**สัปดาห์ที่ 10:** Quiz ย่อย<br>**สัปดาห์ที่ 13:** โครงงาน/การบ้านใหญ่<br>**สัปดาห์ที่ 16:** สอบปลายภาค<br>**ทุกสัปดาห์:** การมีส่วนร่วมในชั้นเรียน'],
        ['**CLO4**', '**สัปดาห์ที่ 8:** สอบกลางภาค<br>**สัปดาห์ที่ 13:** โครงงาน/การบ้านใหญ่<br>**สัปดาห์ที่ 16:** สอบปลายภาค<br>**ทุกสัปดาห์:** การมีส่วนร่วมในชั้นเรียน'],
        ['**CLO5**', '**สัปดาห์ที่ 8:** สอบกลางภาค<br>**สัปดาห์ที่ 13:** โครงงาน/การบ้านใหญ่<br>**สัปดาห์ที่ 16:** สอบปลายภาค<br>**ทุกสัปดาห์:** การมีส่วนร่วมในชั้นเรียน']
    ];
    generateTable('table-container-3', ['CLO ที่เกี่ยวข้อง', 'สัปดาห์ที่ประเมิน (วิธีการประเมิน)'], table3Data);

    const table4Data = [
        ['**CLO1**', 'ระบุและเลือกใช้บันไดเสียง Major และ minor รวมถึงคอร์ด Diatonic ในบันไดเสียงได้อย่างถูกต้อง', '20.5%'],
        ['**CLO2**', 'อธิบายและระบุลักษณะการพลิกกลับของคอร์ด รวมถึง figured bass ได้อย่างถูกต้อง', '15.5%'],
        ['**CLO3**', 'เลือกใช้ predominant, diatonic substitution และ V7 ได้อย่างเหมาะสม', '16.33%'],
        ['**CLO4**', 'สามารถอธิบายและประยุกต์ใช้ 4-part writing rules ได้อย่างถูกต้อง', '18.83%'],
        ['**CLO5**', 'สามารถอธิบายและประยุกต์ใช้ root position part writing ได้อย่างถูกต้อง', '18.83%']
    ];
    const table4Footer = [
        { text: '**รวมสำหรับ CLO ที่ระบุ**', colspan: 2, class: 'text-right font-bold' },
        { text: '**90%**', class: 'font-bold' }
    ];
    generateTable('table-container-4', ['CLO', 'คำอธิบาย CLO', 'สัดส่วนคะแนน (%) (จาก 90%)'], table4Data, table4Footer);

});
</script>
</body>
</html>
